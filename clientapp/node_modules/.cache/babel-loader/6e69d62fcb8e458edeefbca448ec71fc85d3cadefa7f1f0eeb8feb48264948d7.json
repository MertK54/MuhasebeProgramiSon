{"ast":null,"code":"import axios from 'axios';\nimport { Modal } from 'bootstrap';\nimport swal from 'sweetalert';\nexport default {\n  name: \"SupplierUpdateComponent\",\n  data() {\n    return {\n      suppliers: [],\n      selectedSupplier: {}\n    };\n  },\n  mounted() {\n    this.getSupplier();\n  },\n  methods: {\n    getSupplier() {\n      axios.get('http://localhost:5280/api/supplier/supplier-get').then(response => {\n        console.log(response.data);\n        if (response != null && response.data != null) {\n          this.suppliers = response.data;\n        }\n      }).catch(error => {\n        console.error(\"Error while fetching suppliers:\", error);\n        swal({\n          title: \"Supplier not listed\",\n          text: \"Error when listing suppliers\",\n          icon: \"warning\",\n          dangerMode: true\n        });\n      });\n    },\n    openUpdateModal(supplier) {\n      this.selectedSupplier = {\n        ...supplier\n      };\n      const modal = new Modal(document.getElementById('updateModal'));\n      modal.show();\n    },\n    updateSupplier() {\n      const matched = this.suppliers.find(sup => sup.name === this.selectedSupplier.name && sup.e_mail === this.selectedSupplier.e_mail);\n      console.log(\"matched suppliers:\", matched);\n      if (!matched.name && !matched.e_mail) {\n        const params = {\n          name: this.selectedSupplier.name,\n          e_mail: this.selectedSupplier.e_mail,\n          phone_number: this.selectedSupplier.phone_number,\n          adress: this.selectedSupplier.adress\n        };\n        console.log(\"params value\", params);\n        axios.post(\"http://localhost:5280/api/supplier/supplier-update\", params).then(response => {\n          if (response.data.token.length === 36) {\n            console.log(\"Supplier updated\", response.data);\n            swal({\n              title: \"Supplier updated\",\n              text: \"Successfly updated supplier\",\n              icon: \"success\"\n            });\n            this.getSupplier();\n            const modal = Modal.getInstance(document.getElementById('updateModal'));\n            modal.hide();\n          }\n        }).catch(error => {\n          console.log(\"Update fail\", error);\n          swal({\n            title: \"Supplier not updated\",\n            text: \"Error when updated supplier\",\n            icon: \"warning\",\n            dangerMode: true\n          });\n        });\n      } else {\n        swal({\n          title: \"There is customer!\",\n          text: \"There is a supplier with this email and name\",\n          icon: \"warning\",\n          dangerMode: true\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","Modal","swal","name","data","suppliers","selectedSupplier","mounted","getSupplier","methods","get","then","response","console","log","catch","error","title","text","icon","dangerMode","openUpdateModal","supplier","modal","document","getElementById","show","updateSupplier","matched","find","sup","e_mail","params","phone_number","adress","post","token","length","getInstance","hide"],"sources":["C:\\Users\\Polisoft WEB\\Documents\\MuhasebeProgrami\\clientapp\\src\\components\\Suppliers\\SupplierUpdateComponent.vue"],"sourcesContent":["<template>\n    <table class=\"table table-dark\">\n        <thead>\n            <tr>\n                <th>Name</th>\n                <th>Email</th>\n                <th>Phone</th>\n                <th>Address</th>\n                <th>Update</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr v-for=\"supplier in suppliers\" :key=\"supplier.supplier_id\"> \n                <td>{{ supplier.name }}</td>\n                <td>{{ supplier.e_mail }}</td>\n                <td>{{ supplier.phone_number }}</td>\n                <td>{{ supplier.adress }}</td>\n                <td><button class=\"btn btn-primary\" @click=\"openUpdateModal(supplier)\">Update</button></td>\n            </tr>\n        </tbody>\n    </table>\n    <div class=\"modal fade text-dark\" id=\"updateModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">Update Supplier</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\" style=\"color:black\">\n                    <form @submit.prevent=\"updateSupplier\">\n                        <div class=\"mb-3\">\n                            <label for=\"name\" class=\"form-label\">Name</label>\n                            <input type=\"text\" v-model=\"selectedSupplier.name\" class=\"form-control\" id=\"name\">\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"email\" class=\"form-label\">Email</label>\n                            <input type=\"email\" v-model=\"selectedSupplier.e_mail\" class=\"form-control\" id=\"email\">\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"phone\" class=\"form-label\">Phone</label>\n                            <input type=\"text\" v-model=\"selectedSupplier.phone_number\" class=\"form-control\" id=\"phone\">\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"address\" class=\"form-label\">Address</label>\n                            <input type=\"text\" v-model=\"selectedSupplier.adress\" class=\"form-control\" id=\"address\">\n                        </div>\n                        <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { Modal } from 'bootstrap';\nimport swal from 'sweetalert';\nexport default {\n    name: \"SupplierUpdateComponent\",\n    data() {\n        return {\n            suppliers: [],\n            selectedSupplier: {}\n        }\n    },\n    mounted() {\n        this.getSupplier();\n    },\n    methods: {\n        getSupplier() {\n                axios.get('http://localhost:5280/api/supplier/supplier-get')\n                .then(response => {\n                    console.log(response.data);\n                    if (response != null && response.data != null) {\n                        this.suppliers = response.data;\n                    }\n                })\n                .catch(error => {\n                    console.error(\"Error while fetching suppliers:\", error);\n                    swal({\n                        title: \"Supplier not listed\",\n                        text: \"Error when listing suppliers\",\n                        icon: \"warning\",\n                        dangerMode: true\n                    });\n                });\n            },\n        openUpdateModal(supplier) {\n            this.selectedSupplier = { ...supplier };\n            const modal = new Modal(document.getElementById('updateModal'));\n            modal.show();\n        },\n        updateSupplier() {\n            const matched = this.suppliers.find(sup => sup.name === this.selectedSupplier.name && sup.e_mail === this.selectedSupplier.e_mail)\n            console.log(\"matched suppliers:\",matched)\n            if(!matched.name && !matched.e_mail){\n                const params = {\n                    name: this.selectedSupplier.name,\n                    e_mail: this.selectedSupplier.e_mail,\n                    phone_number: this.selectedSupplier.phone_number,\n                    adress: this.selectedSupplier.adress\n                }\n                console.log(\"params value\", params);\n                axios.post(\"http://localhost:5280/api/supplier/supplier-update\",params)\n                    .then(response => {\n                        if(response.data.token.length===36){\n                             console.log(\"Supplier updated\", response.data);\n                            swal({title: \"Supplier updated\",text: \"Successfly updated supplier\",icon: \"success\"});\n                            this.getSupplier();\n                            const modal = Modal.getInstance(document.getElementById('updateModal'));\n                            modal.hide();\n                        }\n                    })\n                    .catch(error => {\n                        console.log(\"Update fail\", error);\n                        swal({title: \"Supplier not updated\",text: \"Error when updated supplier\",icon: \"warning\",dangerMode: true});\n                    });\n            }\n            else{\n                swal({title: \"There is customer!\",text: \"There is a supplier with this email and name\",icon: \"warning\",dangerMode: true});\n            }\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}