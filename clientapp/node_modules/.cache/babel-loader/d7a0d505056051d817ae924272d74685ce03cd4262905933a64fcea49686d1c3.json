{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_2 = {\n  class: \"col-md-6\"\n};\nconst _hoisted_3 = {\n  class: \"col-md-6\"\n};\nconst _hoisted_4 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_6 = {\n  class: \"col-md-12\"\n};\nconst _hoisted_7 = {\n  style: {\n    \"color\": \"grey\"\n  }\n};\nconst _hoisted_8 = {\n  class: \"col-md-12 mt-2\"\n};\nconst _hoisted_9 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_10 = {\n  class: \"row mb-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_select = _resolveComponent(\"v-select\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_cache[16] || (_cache[16] = _createElementVNode(\"h1\", null, \"Create Purchase Invoice\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[7] || (_cache[7] = _withModifiers((...args) => $options.createPurchaseInvoice && $options.createPurchaseInvoice(...args), [\"prevent\"])),\n    class: \"mx-auto my-3 p-5 bg-dark\",\n    style: {\n      \"width\": \"50rem\",\n      \"border\": \"1px solid grey\"\n    }\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"customer\",\n    class: \"form-label\"\n  }, \"Select Customer:\", -1 /* HOISTED */)), _createVNode(_component_v_select, {\n    options: $data.customer,\n    label: \"name\",\n    modelValue: $data.formData.customer_id,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.formData.customer_id = $event),\n    reduce: customer => customer.id,\n    placeholder: \"Select Customer\",\n    style: {\n      \"color\": \"black\"\n    }\n  }, null, 8 /* PROPS */, [\"options\", \"modelValue\", \"reduce\"])]), _createElementVNode(\"div\", _hoisted_3, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    for: \"supplier\",\n    class: \"form-label\"\n  }, \"Select Supplier:\", -1 /* HOISTED */)), _createVNode(_component_v_select, {\n    options: $data.supplier,\n    label: \"name\",\n    modelValue: $data.formData.supplier_id,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.formData.supplier_id = $event),\n    reduce: supplier => supplier.id,\n    placeholder: \"Select Supplier\",\n    style: {\n      \"color\": \"black\"\n    }\n  }, null, 8 /* PROPS */, [\"options\", \"modelValue\", \"reduce\"])])]), _createElementVNode(\"div\", _hoisted_4, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"product_name\",\n    class: \"form-label\"\n  }, \"Select Product:\", -1 /* HOISTED */)), _createVNode(_component_v_select, {\n    options: $data.stocks,\n    label: \"product_name\",\n    modelValue: $data.formData.product_name,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.formData.product_name = $event),\n    reduce: stock => stock.product_name,\n    placeholder: \"Select Product\",\n    style: {\n      \"color\": \"black\"\n    }\n  }, null, 8 /* PROPS */, [\"options\", \"modelValue\", \"reduce\"])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    for: \"validationDefault02\",\n    class: \"form-label\"\n  }, \"Quantity\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.formData.quantity = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.formData.quantity]]), _createElementVNode(\"small\", _hoisted_7, \"Available stock: \" + _toDisplayString(this.currentStock.quantity), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    for: \"validationDefault03\",\n    class: \"form-label\"\n  }, \"Unit Price\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.formData.unit_price = $event),\n    required: \"\",\n    step: \"0.01\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.formData.unit_price]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    for: \"invoice_status\",\n    class: \"form-label\"\n  }, \"Select Status:\", -1 /* HOISTED */)), _createVNode(_component_v_select, {\n    options: $data.invoice_status,\n    modelValue: $data.formData.invoice_statu,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.formData.invoice_statu = $event),\n    placeholder: \"Select Status\",\n    style: {\n      \"color\": \"black\"\n    }\n  }, null, 8 /* PROPS */, [\"options\", \"modelValue\"])]), _createElementVNode(\"div\", _hoisted_10, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    for: \"invoice_status\",\n    class: \"form-label\"\n  }, \"Select Payment:\", -1 /* HOISTED */)), _createVNode(_component_v_select, {\n    options: $data.payment_methods,\n    modelValue: $data.formData.payment_method,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.formData.payment_method = $event),\n    placeholder: \"Select Payment\",\n    style: {\n      \"color\": \"black\"\n    }\n  }, null, 8 /* PROPS */, [\"options\", \"modelValue\"])])]), _cache[15] || (_cache[15] = _createStaticVNode(\"<div class=\\\"row\\\"><div class=\\\"col-6\\\"><div class=\\\"form-check\\\"><input class=\\\"form-check-input\\\" type=\\\"checkbox\\\" required><label class=\\\"form-check-label\\\" for=\\\"invalidCheck2\\\"> Agree to terms and conditions </label></div></div><div class=\\\"col-12 mt-2\\\"><button class=\\\"btn btn-primary\\\" type=\\\"submit\\\">Create</button></div></div>\", 1))], 32 /* NEED_HYDRATION */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_Fragment","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","createPurchaseInvoice","_hoisted_1","_hoisted_2","for","_createVNode","_component_v_select","options","$data","customer","label","modelValue","formData","customer_id","$event","reduce","id","placeholder","_hoisted_3","supplier","supplier_id","_hoisted_4","stocks","product_name","stock","_hoisted_5","_hoisted_6","type","quantity","required","_hoisted_7","_toDisplayString","currentStock","_hoisted_8","unit_price","step","_hoisted_9","invoice_status","invoice_statu","_hoisted_10","payment_methods","payment_method","_createStaticVNode"],"sources":["C:\\Users\\Polisoft WEB\\Documents\\MuhasebeProgrami\\clientapp\\src\\components\\Invoices\\InvoicePurchaseComponent.vue"],"sourcesContent":["<template>\n    <h1>Create Purchase Invoice</h1>\n    <form @submit.prevent=\"createPurchaseInvoice\" class=\"mx-auto my-3 p-5 bg-dark\" style=\"width: 50rem; border: 1px solid grey;\">\n      <div class=\"row mb-3\">\n        <div class=\"col-md-6\">\n          <label for=\"customer\" class=\"form-label\">Select Customer:</label>\n          <v-select :options=\"customer\" label=\"name\" v-model=\"formData.customer_id\" :reduce=\"customer => customer.id\" placeholder=\"Select Customer\" style=\"color: black;\"></v-select>\n        </div>\n        <div class=\"col-md-6\">\n          <label for=\"supplier\" class=\"form-label\">Select Supplier:</label>\n          <v-select :options=\"supplier\" label=\"name\" v-model=\"formData.supplier_id\" :reduce=\"supplier => supplier.id\" placeholder=\"Select Supplier\" style=\"color: black;\"></v-select>\n        </div>\n      </div>\n      \n      <div class=\"row mb-3\">\n        <label for=\"product_name\" class=\"form-label\">Select Product:</label>\n        <v-select :options=\"stocks\" label=\"product_name\" v-model=\"formData.product_name\" :reduce=\"stock => stock.product_name\" placeholder=\"Select Product\" style=\"color: black;\"></v-select>\n      </div>\n  \n      <div class=\"row mb-3\">\n        <div class=\"col-md-12\">\n          <label for=\"validationDefault02\" class=\"form-label\">Quantity</label>\n          <input type=\"number\" class=\"form-control\" v-model=\"formData.quantity\" required />\n          <small style=\"color: grey;\">Available stock: {{ this.currentStock.quantity }}</small>\n        </div>\n        \n        <div class=\"col-md-12 mt-2\">\n          <label for=\"validationDefault03\" class=\"form-label\">Unit Price</label>\n          <input type=\"number\" class=\"form-control\" v-model=\"formData.unit_price\" required step=\"0.01\" />\n        </div>\n        <div class=\"row mb-3\">\n          <label for=\"invoice_status\" class=\"form-label\">Select Status:</label>\n          <v-select :options=\"invoice_status\" v-model=\"formData.invoice_statu\" placeholder=\"Select Status\" style=\"color: black;\"></v-select>\n        </div>\n\n        <div class=\"row mb-3\">\n         <label for=\"invoice_status\" class=\"form-label\">Select Payment:</label>\n         <v-select :options=\"payment_methods\" v-model=\"formData.payment_method\" placeholder=\"Select Payment\" style=\"color: black;\"></v-select>\n        </div>\n    </div>\n  \n      <div class=\"row\">\n        <div class=\"col-6\">\n          <div class=\"form-check\">\n            <input class=\"form-check-input\" type=\"checkbox\" required />\n            <label class=\"form-check-label\" for=\"invalidCheck2\"> Agree to terms and conditions </label>\n          </div>\n        </div>\n        <div class=\"col-12 mt-2\">\n          <button class=\"btn btn-primary\" type=\"submit\">Create</button>\n        </div>\n      </div>\n    </form>\n  </template>\n  \n    \n  <script>\n  import axios from 'axios';\n  import vSelect from 'vue-select';\n  import 'vue-select/dist/vue-select.css';\n  import swal from 'sweetalert';\n  export default {\n    name: \"InvoicePurchaseComponent\",\n    components:{\n      vSelect,\n    },\n      data(){\n          return {\n              formData:{\n                  customer_id:null,\n                  supplier_id:null,\n                  stock_id:null,\n                  product_name:'',\n                  quantity:0,\n                  unit_price:0.00,\n                  invoice_type:'purchase',\n                  total_amount:0.00,\n                  invoice_statu:null,\n                  payment_method:null\n              },\n              supplier:[],\n              data:[],\n              stocks: [],\n              customer:[],\n              currentStock:[],\n              invoice_status:['pending','approved'],\n              payment_methods:['credit card','cash payment','remittance']\n          }  \n      },\n      async created() {\n          const [customer, stock, supplier] = await Promise.all([\n              this.getCustomer(),\n              this.getStock(),\n              this.getSupplier()\n          ]);\n      },\n      watch: {\n        'formData.product_name'(newValue) {\n          this.currentStock = this.stocks.find(stock => stock.product_name === newValue);\n          if (this.currentStock) {\n            this.formData.unit_price = this.currentStock.unit_price;\n            this.formData.stock_id = this.currentStock.stock_id;\n          }\n        }\n      },\n      methods:{\n          getSupplier(){\n              axios.get('http://localhost:5280/api/supplier/supplier-get')\n              .then(response => {\n                if (response && response.data) {\n                  this.supplier = response.data.map(item => ({ id: item.supplier_id, name: item.name }));\n                }\n              });\n          },\n          getStock(){\n              axios.get('http://localhost:5280/api/stock/stock-get')\n              .then(response => {\n                if (response && response.data) {\n                  this.stocks = response.data;\n                }\n              });\n          },\n          getCustomer(){\n              axios.get('http://localhost:5280/api/customer/customer-get')\n              .then(response => {\n                if(response != null && response.data != null)\n                  this.customer = response.data.map(item => ({ id:item.customer_id,name: item.name }))\n              })\n              .catch(error => {\n                swal({title:\"customer not listed\",text: \"error when listing customer\",icon:\"warning\",dangerMode:true})\n                console.error(\"customers not get\", error);\n              });\n          },\n          createPurchaseInvoice() {\n            this.formData.total_amount = this.formData.quantity * this.formData.unit_price;\n            console.log(\"Form Data:\", this.formData);\n            if (this.formData.quantity > this.currentStock.quantity) {\n                swal({title: \"Stock Limit Exceeded\", text: `You cannot sell more than ${this.currentStock.quantity} items.`, icon: \"warning\",dangerMode: true});\n                return; \n            }\n              const params = {\n                supplier_id: this.formData.supplier_id,\n                customer_id: this.formData.customer_id,\n                stock_id: this.formData.stock_id,\n                product_name: this.formData.product_name,\n                quantity: parseInt(this.formData.quantity, 10),\n                unit_price: parseFloat(this.formData.unit_price),\n                total_amount:parseFloat(this.formData.total_amount),\n                invoice_type:'purchase',\n                invoice_statu:this.formData.invoice_statu,\n                payment_method:this.formData.payment_method\n              };\n              console.log(\"Params being sent:\", params);\n              axios.post('http://localhost:5280/api/invoice/invoice-create-purchase', params, {headers: { 'Content-Type': 'application/json' }})\n              .then(response => {\n                swal({title:\"Invoce created\",icon:\"success\"})\n                console.log(\"Invoce created\", response.data);\n              })\n              .catch(error => {\n                  console.log(\"Error creating invoce\", error.response ? error.response.data : error); \n              });\n          },\n          updateStock(id, quantitySold, unitPrice) {\n            const params = {\n                stock_id: id,\n                quantity: quantitySold,\n                unit_price: unitPrice\n            }\n            console.log(\"params değerleri:\"+params);\n            axios.post('http://localhost:5280/api/stock/stock-update-reduce',params, {headers: { 'Content-Type': 'application/json' }})\n            .then(response => {\n                console.log(\"Stock updated\", response.data);\n            })\n            .catch(error => {\n                console.log(\"Error updating stock\", error.response ? error.response.data : error);\n                swal({ title: \"Stock update failed\", text: \"Could not update stock\", icon: \"error\" });\n            });\n          }\n      }\n  }\n  </script>\n    \n  <style>\n  </style>\n    "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}